{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 08e34fbdc3598a794525","webpack:///./src/math/index.ts","webpack:///./src/shader/shader.ts","webpack:///./src/math/vector2.ts","webpack:///./src/agent.ts","webpack:///./src/geometry/square.ts","webpack:///./src/scene/scene.ts","webpack:///./src/math/vector3.ts","webpack:///./src/math/matrix4.ts","webpack:///./src/renderer/index.ts","webpack:///./src/renderer/webGLRenderer.ts"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","vector2_1","Vector2","vector3_1","Vector3","matrix4_1","Matrix4","Axis","toRadian","deg","rad","Math","PI","parseFloat","toFixed","toDegree","round","math_1","ShaderType","WebGLRenderingContext","VERTEX_SHADER","FRAGMENT_SHADER","Shader","[object Object]","shaderData","vertAttributes","Map","gl","type","code","tempAttr","tempUniform","tempVarying","lines","split","id","compileSource","line","endIndex","charAt","length","varName","substring","lastIndexOf","search","push","attributes","uniforms","varyings","ID","Attributes","Uniforms","Varyings","attName","attribute","filter","attrib","ReferenceError","set","uniformName","data","uLoc","uniform","uniformMatrix4fv","flatten","Float32Array","uniform2fv","uniform3fv","uniform4fv","TypeError","uniform1f","source","shaderID","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","log","getShaderInfoLog","x","y","z","vec","sqrt","scaler","square_1","Square","scene_1","Scene","shader_1","renderer_1","WebGLRenderer","__export","width","height","bufferId","vbo","r","g","b","a","Error","size","normalized","stride","offset","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","shaders","renderables","programId","programLinked","item","linkProgram","values","attrs","att","getAttribLocation","vertAttrib","getVertexAttribFor","undefined","enableVertexAttribArray","vertexAttribPointer","FLOAT","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","gObject","preRender","drawArrays","TRIANGLE_STRIP","newShader","createProgram","setShaderData","attachShader","shader","has","arr","map","value","fill","_mat","theta","axis","X","cos","sin","Y","Z","webGLRenderer_1","options","devicePixelRatio","canvas","_glCtx","initWithOptions","scene","clear","render","style","viewport","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","window","domCanvas","document","createElementNS","body","appendChild","fullscreen","clientWidth","clientHeight","glContext","getContext","clearColor"],"mappings":"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","file":"agent.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Agent\"] = factory();\n\telse\n\t\troot[\"Agent\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 08e34fbdc3598a794525","export { Vector2 } from './vector2';\nexport { Vector3 } from './vector3';\nexport { Matrix4 } from './matrix4';\n\n\nexport enum Axis {\n\tX,\n\tY,\n\tZ,\n}\n\nexport interface IPoint {\n\treadonly x: number;\n\treadonly y: number;\n\treadonly z: number;\n}\n\nexport interface IVector extends IPoint {\n\t/**\n\t * Add a vector\n\t * @param {IVector | IPoint}\tvec\ta vector object\n\t * @returns {IVector}\ta new Vector\n\t */\n\tadd(vec: IVector): IVector;\n\n\t/**\n\t * Subtract a vector\n\t * @param {IVector}  vec  a vector object\n\t * @returns {IVector}\ta new Vector\n\t */\n\tsub(vec: IVector): IVector;\n\n\t/**\n\t * Divide a vector\n\t * @param {IVector}  vec  a vector object\n\t * @returns {IVector}\ta new Vector\n\t */\n\tdiv(vec: IVector): IVector | TypeError;\n\n\t/**\n\t * Multiply a vector\n\t * @param {IVector}  vec  a vector object\n\t * @returns {IVector}\ta new Vector\n\t */\n\tmult(vec: IVector): IVector;\n\n\t/**\n\t * Dot product a vector\n\t * @param {IVector}  vec  a vector object\n\t * @returns {number}\tthe number representing the dot product\n\t */\n\tdot(vec: IVector): number;\n\n\t/**\n\t * Scale a vector\n\t * @param {number}  scaler  the value to scale by\n\t\t* @returns {IVector}\ta new scaled Vector\n\t */\n\tscale(scaler: number): IVector;\n\n\t/**\n\t * Normalize a vector\n\t * @returns {IVector}\ta new normalized Vector\n\t */\n\tnormalize(): IVector;\n\n\t/**\n\t * Magnitude of a vector\n\t * @returns {number}\tthe length of the vector\n\t */\n\tlength(): number;\n\n\t/**\n\t * Flatten to a float32array\n\t * @returns {Float32Array} the float32array of x, y, z\n\t */\n\tflatten(): Float32Array;\n}\n\nexport interface IMatrix {\n\t/**\n\t * Change the matrix to an identity matrix\n\t * @return {void}\n\t */\n\tsetAsIdentity(): void;\n\n\t/**\n\t * return a new scaled matrix\n\t * @param {number} scaler   the value to scale the matrix\n\t * @return {IMatrix}  the new scaled matrix\n\t */\n\tscale(scaler: number): IMatrix;\n\n\t/**\n\t * return a new translated matrix\n\t * @param {IVector} vec   the vector to translate by\n\t * @return {IMatrix}  the new translated matrix\n\t */\n\ttranslate(vec: IVector): IMatrix;\n\n\t/**\n\t * return a new rotated matrix\n\t * @param {number} theta   the degree or radian to rotate by\n\t * @param {Axis} axis   the axis to rotate by\n\t * @return {IMatrix}  the new rotated matrix\n\t */\n\trotate(theta: number, axis: Axis): IMatrix;\n\n\t/**\n\t * return the matrix data as a Float32Array\n\t * @return {Flaot32Array}  the matrix data as an array\n\t */\n\tflatten(): Float32Array;\n}\n\n/**\n * convert degree to radian\n * @param {number} deg  the degree to convert\n * @return {number}   the degree represented in radian\n */\nexport function toRadian(deg: number): number {\n\tconst rad = (deg / 360) * 2 * Math.PI;\n\treturn parseFloat(rad.toFixed(5));\n}\n\n/**\n * convert radian to degree\n * @param {number} rad  the radian to convert\n * @return {number}   the degree\n */\nexport function toDegree(rad: number): number {\n\treturn Math.round((rad / (2 * Math.PI)) * 360);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/index.ts","import { Vector2, Vector3, Matrix4 } from '../math';\n\n\nexport enum ShaderType {\n\tVertex = WebGLRenderingContext.VERTEX_SHADER,\n\tFragment = WebGLRenderingContext.FRAGMENT_SHADER,\n}\n\nexport interface IShaderAttrib {\n\tname: string;\n\tid: number | WebGLUniformLocation;\n}\n\nexport interface IVertexAttribute {\n\treadonly size: number;\n\treadonly normalized: boolean;\n\treadonly stride: number;\n\treadonly offset: number;\n}\n\ninterface IShaderData {\n\tid: WebGLShader;\n\ttype: ShaderType;\n\tcode: string;\n\tattributes: IShaderAttrib[];\n\tuniforms: IShaderAttrib[];\n\tvaryings: IShaderAttrib[];\n}\n\nexport class Shader {\n\tprivate shaderData: IShaderData;\n\tprivate vertAttributes: Map<string, IVertexAttribute>;\n\n\tconstructor() {\n\t\tthis.shaderData = null;\n\t\tthis.vertAttributes = new Map();\n\t}\n\n\tpublic setShaderData(gl: WebGLRenderingContext, type: ShaderType, code: string): void {\n\t\tconst tempAttr: IShaderAttrib[] = [];\n\t\tconst tempUniform: IShaderAttrib[] = [];\n\t\tconst tempVarying: IShaderAttrib[] = [];\n\n\t\tconst lines = code.split('\\n');\n\t\tconst id = this.compileSource(gl, type, code);\n\n\t\tfor (const line of lines) {\n\t\t\tconst endIndex = line.charAt(line.length - 1) === ';' ? line.length - 1 : line.length;\n\t\t\tconst varName = line.substring(line.lastIndexOf(' ') + 1, endIndex);\n\n\t\t\tif (line.search(/^\\s*(attribute)/gi) !== -1) {\n\t\t\t\ttempAttr.push({\n\t\t\t\t\tname: varName,\n\t\t\t\t\tid: -1,\n\t\t\t\t});\n\n\t\t\t} else if (line.search(/^\\s*(uniform)/gi) !== -1) {\n\t\t\t\ttempUniform.push({\n\t\t\t\t\tname: varName,\n\t\t\t\t\tid: 0,\n\t\t\t\t});\n\n\t\t\t} else if (line.search(/^\\s*(varying)/gi) !== -1) {\n\t\t\t\ttempVarying.push({\n\t\t\t\t\tname: varName,\n\t\t\t\t\tid: 0,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.shaderData = {\n\t\t\tid,\n\t\t\ttype,\n\t\t\tcode,\n\t\t\tattributes: tempAttr,\n\t\t\tuniforms: tempUniform,\n\t\t\tvaryings: tempVarying,\n\t\t};\n\t}\n\n\tpublic get ID(): WebGLShader {\n\t\treturn this.shaderData.id;\n\t}\n\n\tpublic get Attributes(): IShaderAttrib[] {\n\t\treturn this.shaderData.attributes;\n\t}\n\n\tpublic get Uniforms(): IShaderAttrib[] {\n\t\treturn this.shaderData.uniforms;\n\t}\n\n\tpublic get Varyings(): IShaderAttrib[] {\n\t\treturn this.shaderData.varyings;\n\t}\n\n\tpublic getVertexAttribFor(attName: string): IVertexAttribute | undefined {\n\t\treturn this.vertAttributes.get(attName);\n\t}\n\n\tpublic setVertexAttribFor(attName: string, attribute: IVertexAttribute): void {\n\t\t// cache for preRender\n\t\tconst attrs = this.shaderData.attributes;\n\t\tconst aLoc = attrs.filter((attrib) => attrib.name === attName);\n\n\t\tif (aLoc.length === 0) {\n\t\t\t// write a dispatch system for errors\n\t\t\tthrow new ReferenceError(`setVertexAttrib: ${attName} was not found`);\n\t\t}\n\n\t\tthis.vertAttributes.set(attName, attribute);\n\t}\n\n\tpublic setUniform(gl: WebGLRenderingContext, uniformName: string, data: Matrix4 | Float32Array | number ) {\n\t\tconst uniforms = this.shaderData.uniforms;\n\t\tconst uLoc = uniforms.filter((uniform) => uniform.name === uniformName);\n\n\t\tif (uLoc.length === 0) {\n\t\t\tthrow new ReferenceError(`setUniform: ${uniformName} was not found`);\n\t\t}\n\n\t\tif (data instanceof Matrix4) {\n\t\t\tgl.uniformMatrix4fv(uLoc[ 0 ].id, false, data.flatten());\n\n\t\t} else if (data instanceof Float32Array) {\n\t\t\tconst len = data.length;\n\t\t\tswitch (len) {\n\t\t\t\tcase 2:\n\t\t\t\t\tgl.uniform2fv(uLoc[ 0 ].id, data);\n\n\t\t\t\tcase 3:\n\t\t\t\t\tgl.uniform3fv(uLoc[ 0 ].id, data);\n\n\t\t\t\tcase 4:\n\t\t\t\t\tgl.uniform4fv(uLoc[ 0 ].id, data);\n\t\t\t}\n\n\t\t} else if (typeof data === 'number') {\n\t\t\tgl.uniform1f(uLoc[ 0 ].id, data);\n\n\t\t} else {\n\t\t\t// should we throw, or setup a dispatch system?\n\t\t\tthrow new TypeError('setUniform: data passed is not a valid type');\n\t\t}\n\t}\n\n\tprivate compileSource(gl: WebGLRenderingContext, type: ShaderType, source: string): WebGLShader {\n\t\tconst shaderID = gl.createShader(type);\n\n\t\tgl.shaderSource(shaderID, source);\n\t\tgl.compileShader(shaderID);\n\t\tif (!gl.getShaderParameter(shaderID, gl.COMPILE_STATUS)) {\n\t\t\t// should we throw, or setup a dispatch system?\n\t\t\tconsole.log(`Shader COMPILE_STATUS error: ${gl.getShaderInfoLog(shaderID)}`);\n\t\t}\n\n\t\treturn shaderID;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shader/shader.ts","import { IVector, IPoint } from '../math';\n\n\nexport class Vector2 implements IVector {\n\tpublic readonly x: number;\n\tpublic readonly y: number;\n\tpublic readonly z: number;\n\n\tconstructor(x: number = 0, y: number = 0) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = 0;\n\t}\n\n\tpublic add(vec: IPoint | Vector2): Vector2 {\n\t\treturn new Vector2(vec.x + this.x, vec.y + this.y);\n\t}\n\n\tpublic sub(vec: IPoint | Vector2): Vector2 {\n\t\treturn new Vector2(this.x - vec.x, this.y - vec.y);\n\t}\n\n\tpublic mult(vec: IPoint | Vector2): Vector2 {\n\t\treturn new Vector2(this.x * vec.x, this.y * vec.y);\n\t}\n\n\tpublic div(vec: IPoint | Vector2): Vector2 | TypeError {\n\t\tif (vec.x === 0 || vec.y === 0) {\n\t\t\tthrow new TypeError(`Can not divide by zero x:${vec.x} y:${vec.y}`);\n\t\t}\n\t\treturn new Vector2(this.x / vec.x, this.y / vec.y);\n\t}\n\n\tpublic dot(vec: IPoint | Vector2): number {\n\t\treturn (this.x * vec.x) + (this.y * vec.y);\n\t}\n\n\tpublic length(): number {\n\t\treturn Math.sqrt((this.x * this.x) + (this.y * this.y));\n\t}\n\n\tpublic scale(scaler: number): Vector2 {\n\t\treturn new Vector2(this.x * scaler, this.y * scaler);\n\t}\n\n\tpublic normalize(): Vector2 {\n\t\tconst l = this.length();\n\t\treturn new Vector2(this.x / l, this.y / l);\n\t}\n\n\tpublic flatten(): Float32Array {\n\t\treturn new Float32Array([this.x, this.y]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/vector2.ts","export { Square } from './geometry/square';\nexport { Scene } from './scene/scene';\nexport { Shader, ShaderType } from './shader/shader';\nexport { WebGLRenderer } from './renderer';\nexport * from './math';\n\n\n\n// WEBPACK FOOTER //\n// ./src/agent.ts","import { IRenderable } from '../renderer';\nimport { IVertexAttribute } from '../shader/shader';\n\n\nexport class Square implements IRenderable {\n\tprivate vbo: Float32Array;\n\tprivate bufferId: WebGLBuffer;\n\n\n\tconstructor(x: number, y: number, width: number, height: number) {\n\t\tthis.bufferId = null;\n\t\tthis.vbo = new Float32Array(24); // x, y * vertices\n\n\t\tthis.vbo[ 0 ] = x;\n\t\tthis.vbo[ 1 ] = y;\n\t\tthis.vbo[ 2 ] = 0; // r\n\t\tthis.vbo[ 3 ] = 0; // g\n\t\tthis.vbo[ 4 ] = 0; // b\n\t\tthis.vbo[ 5 ] = 0; // a\n\n\t\tthis.vbo[ 6 ] = x + width;\n\t\tthis.vbo[ 7 ] = y;\n\t\tthis.vbo[ 8 ] = 0; // r\n\t\tthis.vbo[ 9 ] = 0; // g\n\t\tthis.vbo[ 10 ] = 0; // b\n\t\tthis.vbo[ 11 ] = 0; // a\n\n\t\tthis.vbo[ 12 ] = x;\n\t\tthis.vbo[ 13 ] = y + height;\n\t\tthis.vbo[ 14 ] = 0; // r\n\t\tthis.vbo[ 15 ] = 0; // g\n\t\tthis.vbo[ 16 ] = 0; // b\n\t\tthis.vbo[ 17 ] = 0; // a\n\n\t\tthis.vbo[ 18 ] = x + width;\n\t\tthis.vbo[ 19 ] = y + height;\n\t\tthis.vbo[ 20 ] = 0; // r\n\t\tthis.vbo[ 21 ] = 0; // g\n\t\tthis.vbo[ 22 ] = 0; // b\n\t\tthis.vbo[ 23 ] = 0; // a\n\t}\n\n\tpublic setColor(r: number, g: number, b: number, a: number): void {\n\t\tfor (let i = 2; i < this.vbo.length; i += 2) {\n\t\t\tthis.vbo[i++] = r % 256;\n\t\t\tthis.vbo[i++] = g % 256;\n\t\t\tthis.vbo[i++] = b % 256;\n\t\t\tthis.vbo[i++] = a % 256;\n\t\t}\n\t}\n\n\tpublic setTexture(): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\t// squares have a default buffer layout\n\tpublic vertexAttributes(): IVertexAttribute {\n\t\treturn {\n\t\t\tsize: 2,\n\t\t\tnormalized: false,\n\t\t\tstride: 24,\n\t\t\toffset: 0,\n\t\t};\n\t}\n\n\t// squares have a default buffer layout\n\tpublic colorAttributes(): IVertexAttribute {\n\t\treturn {\n\t\t\tsize: 4,\n\t\t\tnormalized: false,\n\t\t\tstride: 24,\n\t\t\toffset: 8,\n\t\t};\n\t}\n\n\tpublic bindBuffer(gl: WebGLRenderingContext): void {\n\t\tif (this.bufferId === null) {\n\t\t\tthis.bufferId = gl.createBuffer();\n\t\t}\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.bufferId);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.vbo, gl.STATIC_DRAW);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/square.ts","import { IRenderable } from '../renderer';\nimport { Shader, ShaderType } from '../shader/shader';\n\n\nexport class Scene {\n\tprivate renderables: IRenderable[];\n\tprivate shaders: Map<ShaderType, Shader>;\n\tprivate programId: WebGLProgram;\n\tprivate programLinked: boolean;\n\n\tconstructor() {\n\t\tthis.shaders = new Map<ShaderType, Shader>();\n\t\tthis.renderables = [];\n\t\tthis.programId = null;\n\t\tthis.programLinked = false;\n\t}\n\n\tpublic addDrawable(...item: IRenderable[]): void {\n\t\tthis.renderables.push(...item);\n\t}\n\n\t// this needs to be thought through more. this shouldn't be called with every render call? Right?\n\tpublic preRender(gl: WebGLRenderingContext): void {\n\t\tif (!this.programLinked) {\n\t\t\tthis.programLinked = true;\n\t\t\tgl.linkProgram(this.programId);\n\t\t}\n\n\t\tfor (const shaderData of this.shaders.values()) {\n\t\t\tconst attrs = shaderData.Attributes;\n\n\t\t\tfor (const att of attrs) {\n\t\t\t\tif (att.id === -1) {\n\t\t\t\t\tatt.id = gl.getAttribLocation(this.programId, att.name);\n\t\t\t\t}\n\n\t\t\t\tconst vertAttrib = shaderData.getVertexAttribFor(att.name);\n\t\t\t\tif (vertAttrib !== undefined) {\n\t\t\t\t\tgl.enableVertexAttribArray(att.id as number);\n\t\t\t\t\tgl.vertexAttribPointer(att.id as number, vertAttrib.size, gl.FLOAT, vertAttrib.normalized, vertAttrib.stride, vertAttrib.offset);\n\n\t\t\t\t} else {\n\t\t\t\t\t// TODO\n\t\t\t\t\t// get attribute data for vertexAttrib1f for example\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!gl.getProgramParameter(this.programId, gl.LINK_STATUS)) {\n\t\t\tconsole.log(`Error LINK_STATUS program Id ${gl.getProgramInfoLog(this.programId)}`);\n\t\t}\n\n\t\tgl.useProgram(this.programId);\n\t}\n\n\tpublic render(gl: WebGLRenderingContext) {\n\t\t// TODO\n\t\tfor (const gObject of this.renderables) {\n\t\t\tgObject.bindBuffer(gl);\n\t\t\tthis.preRender(gl);\n\n\t\t\tgl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\t\t}\n\t}\n\n\tpublic addShader(gl: WebGLRenderingContext, type: ShaderType, data: string): void {\n\t\tconst newShader = new Shader();\n\n\t\tif (this.programId === null) {\n\t\t\tthis.programId = gl.createProgram();\n\t\t}\n\n\t\tnewShader.setShaderData(gl, type, data);\n\t\tgl.attachShader(this.programId, newShader.ID);\n\n\t\tthis.shaders.set(type, newShader);\n\t}\n\n\tpublic shader(shader: ShaderType): Shader {\n\t\tif (!this.shaders.has(shader)) {\n\t\t\tthrow new Error(`Scene does not have shader type ${shader} assigned`);\n\t\t}\n\t\treturn this.shaders.get(shader);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scene/scene.ts","import { IVector, IPoint } from '../math';\n\n\nexport class Vector3 implements IVector {\n\tpublic readonly x: number;\n\tpublic readonly y: number;\n\tpublic readonly z: number;\n\n\tconstructor(x: number = 0, y: number = 0, z: number = 0) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t}\n\n\tpublic add(vec: IPoint | IVector): Vector3 {\n\t\treturn new Vector3(this.x + vec.x, this.y + vec.y, this.z + vec.z);\n\t}\n\n\tpublic sub(vec: IPoint | IVector): Vector3 {\n\t\treturn new Vector3(this.x - vec.x, this.y - vec.y, this.z - vec.z);\n\t}\n\n\tpublic div(vec: IPoint | IVector): Vector3 | TypeError {\n\t\tif (vec.x === 0 || vec.y === 0 || vec.z === 0) {\n\t\t\tthrow new TypeError(`Can not divide by zero x:${vec.x} y:${vec.y} z: ${vec.z}`);\n\t\t}\n\t\treturn new Vector3(this.x / vec.x, this.y / vec.y, this.z / vec.z);\n\t}\n\n\tpublic mult(vec: IPoint | IVector): Vector3 {\n\t\treturn new Vector3(this.x * vec.x, this.y * vec.y, this.z * vec.z);\n\t}\n\n\tpublic dot(vec: IPoint | IVector): number {\n\t\treturn (this.x * vec.x) + (this.y * vec.y) + (this.z * vec.z);\n\t}\n\n\tpublic scale(scaler: number): Vector3 {\n\t\treturn new Vector3(this.x * scaler, this.y * scaler, this.z * scaler);\n\t}\n\n\tpublic normalize(): IVector {\n\t\tconst l = this.length();\n\t\treturn new Vector3(this.x / l, this.y / l, this.z / l);\n\t}\n\n\tpublic length(): number {\n\t\treturn Math.sqrt(( this.x * this.x ) + ( this.y * this.y ) + ( this.z * this.z ));\n\t}\n\n\tpublic flatten(): Float32Array {\n\t\treturn new Float32Array([this.x, this.y, this.z]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/vector3.ts","import { Vector2 } from './vector2';\nimport { IMatrix, IPoint, IVector, Axis } from '../math';\n\n\nexport class Matrix4 implements IMatrix {\n\tprivate data: Float32Array;\n\n\tconstructor(arr?: Float32Array) {\n\t\tif (arr !== undefined && arr.length === 16) {\n\t\t\tthis.data = arr.map((value) => value);\n\n\t\t} else {\n\t\t\tthis.data = new Float32Array(16);\n\n\t\t\tthis.data[ 0 ] = 1;\n\t\t\tthis.data[ 5 ] = 1;\n\t\t\tthis.data[ 10 ] = 1;\n\t\t\tthis.data[ 15 ] = 1;\n\t\t}\n\t}\n\n\tpublic setAsIdentity(): void {\n\t\tthis.data.fill(0);\n\n\t\tthis.data[ 0 ] = 1;\n\t\tthis.data[ 5 ] = 1;\n\t\tthis.data[ 10 ] = 1;\n\t\tthis.data[ 15 ] = 1;\n\t}\n\n\tpublic scale(scaler: IPoint | number): Matrix4 {\n\t\tlet x = 1;\n\t\tlet y = 1;\n\t\tlet z = 1;\n\t\tconst _mat = new Matrix4(this.data);\n\n\t\tif (typeof scaler === 'object') {\n\t\t\tx = scaler.x;\n\t\t\ty = scaler.y;\n\t\t\tz = scaler.z || 1;\n\t\t} else {\n\t\t\tx = scaler;\n\t\t\ty = scaler;\n\t\t\tz = scaler;\n\t\t}\n\n\t\t_mat.data[ 0 ] *= x;\n\t\t_mat.data[ 5 ] *= y;\n\t\t_mat.data[ 10 ] *= z;\n\n\t\treturn _mat;\n\t}\n\n\tpublic translate(vec: IVector | IPoint): Matrix4 {\n\t\tlet x = 0;\n\t\tlet y = 0;\n\t\tlet z = 0;\n\t\tconst _mat = new Matrix4(this.data);\n\n\t\tif (vec instanceof Vector2) {\n\t\t\tx = vec.x;\n\t\t\ty = vec.y;\n\t\t\tz = 0;\n\n\t\t} else {\n\t\t\tx = vec.x;\n\t\t\ty = vec.y;\n\t\t\tz = vec.z || 0;\n\t\t}\n\n\t\t_mat.data[ 12 ] += x;\n\t\t_mat.data[ 13 ] += y;\n\t\t_mat.data[ 14 ] += z;\n\n\t\treturn _mat;\n\t}\n\n\tpublic rotate(theta: number, axis: Axis): Matrix4 {\n\t\tconst _mat = new Matrix4(this.data);\n\n\t\tswitch (axis) {\n\t\t\tcase Axis.X:\n\t\t\t_mat.data[ 5 ] *= Math.cos(theta);\n\t\t\t_mat.data[ 6 ] *= Math.sin(theta);\n\t\t\t_mat.data[ 9 ] *= -(Math.sin(theta));\n\t\t\t_mat.data[ 10 ] *= Math.cos(theta);\n\t\t\tbreak;\n\n\t\t\tcase Axis.Y:\n\t\t\t_mat.data[ 0 ] *= Math.cos(theta);\n\t\t\t_mat.data[ 2 ] *= -(Math.sin(theta));\n\t\t\t_mat.data[ 8 ] *= Math.sin(theta);\n\t\t\t_mat.data[ 10 ] *= Math.cos(theta);\n\t\t\tbreak;\n\n\t\t\tcase Axis.Z:\n\t\t\t_mat.data[ 0 ] *= Math.cos(theta);\n\t\t\t_mat.data[ 1 ] *= Math.sin(theta);\n\t\t\t_mat.data[ 4 ] *= -(Math.sin(theta));\n\t\t\t_mat.data[ 5 ] *= Math.cos(theta);\n\t\t\tbreak;\n\t\t}\n\n\t\treturn _mat;\n\t}\n\n\tpublic flatten(): Float32Array {\n\t\treturn this.data;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/matrix4.ts","import { ShaderType } from '../shader/shader';\nimport { Scene } from '../scene/scene';\n\nexport { WebGLRenderer } from '../renderer/webGLRenderer';\n\nexport interface IRenderable {\n\tsetColor(r: number, g: number, b: number, a: number): void;\n\tsetTexture(): void;\n\tbindBuffer(gl: WebGLRenderingContext): void;\n}\n\nexport interface IRenderer {\n\taspect(): number;\n\trender(scene: Scene): void;\n\tresize(x: number, y: number): void;\n}\n\nexport interface IRenderOptions {\n\treadonly width: number;\n\treadonly height: number;\n\treadonly fullscreen?: boolean;\n\treadonly domCanvas?: HTMLCanvasElement;\n\treadonly glContext?: WebGLRenderingContext;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/index.ts","import { IRenderer, IRenderOptions } from '../renderer';\nimport { Scene } from '../scene/scene';\n\n\nexport class WebGLRenderer implements IRenderer {\n\tprivate width: number;\n\tprivate height: number;\n\tprivate devicePixelRatio: number;\n\tprivate canvas: HTMLCanvasElement;\n\tprivate _glCtx: WebGLRenderingContext;\n\n\tconstructor(options?: IRenderOptions) {\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.devicePixelRatio = 1;\n\t\tthis.canvas = null;\n\t\tthis._glCtx = null;\n\n\t\tif (options !== undefined) {\n\t\t\tthis.initWithOptions(options);\n\t\t}\n\t}\n\n\tpublic getContext(): WebGLRenderingContext {\n\t\treturn this._glCtx;\n\t}\n\n\tpublic aspect(): number {\n\t\treturn this.width / this.height;\n\t}\n\n\tpublic render(scene: Scene): void {\n\t\tthis.clear();\n\t\tscene.render(this._glCtx);\n\t}\n\n\tpublic resize(width: number, height: number): void {\n\t\tthis.canvas.width = this.width = width * this.devicePixelRatio;\n\t\tthis.canvas.height = this.height = height * this.devicePixelRatio;\n\n\t\tthis.canvas.style.width = this.width + 'px';\n\t\tthis.canvas.style.height = this.height + 'px';\n\n\t\tthis._glCtx.viewport(0, 0, this.width, this.height);\n\t}\n\n\tprivate clear(): void {\n\t\tthis._glCtx.clear(this._glCtx.COLOR_BUFFER_BIT | this._glCtx.DEPTH_BUFFER_BIT);\n\t}\n\n\tprivate initWithOptions(options: IRenderOptions): void {\n\t\tthis.width = options.width;\n\t\tthis.height = options.height;\n\t\tthis.devicePixelRatio = window.devicePixelRatio || 1;\n\n\t\tif (!options.domCanvas) {\n\t\t\tthis.canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas') as HTMLCanvasElement;\n\t\t\tdocument.body.appendChild(this.canvas);\n\n\t\t} else {\n\t\t\tthis.canvas = options.domCanvas;\n\t\t}\n\n\t\tif (options.fullscreen) {\n\t\t\tthis.width = document.body.clientWidth;\n\t\t\tthis.height = document.body.clientHeight;\n\t\t}\n\n\t\t// canvas size\n\t\tthis.canvas.style.width = this.width + 'px';\n\t\tthis.canvas.style.height = this.height + 'px';\n\n\t\t// drawing size\n\t\tthis.canvas.width = this.width * this.devicePixelRatio;\n\t\tthis.canvas.height = this.height * this.devicePixelRatio;\n\n\t\tif (!options.glContext) {\n\t\t\tthis._glCtx = this.canvas.getContext('webgl2') as WebGLRenderingContext || this.canvas.getContext('webgl') as WebGLRenderingContext;\n\n\t\t\tif (this._glCtx === null) {\n\t\t\t\tthrow new Error('glContext is null. Check WebGL compatibility');\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis._glCtx = options.glContext;\n\t\t}\n\n\t\tthis._glCtx.viewport(0, 0, this.width, this.height);\n\t\tthis._glCtx.clearColor(1.0, 0.0, 1.0, 1.0);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/webGLRenderer.ts"],"sourceRoot":""}