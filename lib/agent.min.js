!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Agent=e():t.Agent=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(2);e.Vector2=r.Vector2;var s=i(6);e.Vector3=s.Vector3;var a=i(7);e.Matrix4=a.Matrix4,function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(e.Axis||(e.Axis={})),e.toRadian=function(t){const e=t/360*2*Math.PI;return parseFloat(e.toFixed(5))},e.toDegree=function(t){return Math.round(t/(2*Math.PI)*360)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(0);!function(t){t[t.Vertex=WebGLRenderingContext.VERTEX_SHADER]="Vertex",t[t.Fragment=WebGLRenderingContext.FRAGMENT_SHADER]="Fragment"}(e.ShaderType||(e.ShaderType={}));e.Shader=class{constructor(){this.shaderData=null,this.vertAttributes=new Map}setShaderData(t,e,i){const r=[],s=[],a=[],n=i.split("\n"),h=this.compileSource(t,e,i);for(const t of n){const e=";"===t.charAt(t.length-1)?t.length-1:t.length,i=t.substring(t.lastIndexOf(" ")+1,e);-1!==t.search(/^\s*(attribute)/gi)?r.push({name:i,id:-1}):-1!==t.search(/^\s*(uniform)/gi)?s.push({name:i,id:0}):-1!==t.search(/^\s*(varying)/gi)&&a.push({name:i,id:0})}this.shaderData={id:h,type:e,code:i,attributes:r,uniforms:s,varyings:a}}get ID(){return this.shaderData.id}get Attributes(){return this.shaderData.attributes}get Uniforms(){return this.shaderData.uniforms}get Varyings(){return this.shaderData.varyings}getVertexAttribFor(t){return this.vertAttributes.get(t)}setVertexAttribFor(t,e){if(0===this.shaderData.attributes.filter(e=>e.name===t).length)throw new ReferenceError(`setVertexAttrib: ${t} was not found`);this.vertAttributes.set(t,e)}setUniform(t,e,i){const s=this.shaderData.uniforms.filter(t=>t.name===e);if(0===s.length)throw new ReferenceError(`setUniform: ${e} was not found`);if(i instanceof r.Matrix4)t.uniformMatrix4fv(s[0].id,!1,i.flatten());else if(i instanceof Float32Array)switch(i.length){case 2:t.uniform2fv(s[0].id,i);case 3:t.uniform3fv(s[0].id,i);case 4:t.uniform4fv(s[0].id,i)}else{if("number"!=typeof i)throw new TypeError("setUniform: data passed is not a valid type");t.uniform1f(s[0].id,i)}}compileSource(t,e,i){const r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||console.log(`Shader COMPILE_STATUS error: ${t.getShaderInfoLog(r)}`),r}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t=0,e=0){this.x=t,this.y=e,this.z=0}add(t){return new r(t.x+this.x,t.y+this.y)}sub(t){return new r(this.x-t.x,this.y-t.y)}mult(t){return new r(this.x*t.x,this.y*t.y)}div(t){if(0===t.x||0===t.y)throw new TypeError(`Can not divide by zero x:${t.x} y:${t.y}`);return new r(this.x/t.x,this.y/t.y)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}scale(t){return new r(this.x*t,this.y*t)}normalize(){const t=this.length();return new r(this.x/t,this.y/t)}flatten(){return new Float32Array([this.x,this.y])}}e.Vector2=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(4);e.Square=r.Square;var s=i(5);e.Scene=s.Scene;var a=i(1);e.Shader=a.Shader,e.ShaderType=a.ShaderType;var n=i(8);e.WebGLRenderer=n.WebGLRenderer,function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(0))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Square=class{constructor(t,e,i,r){this.bufferId=null,this.vbo=new Float32Array(24),this.vbo[0]=t,this.vbo[1]=e,this.vbo[2]=0,this.vbo[3]=0,this.vbo[4]=0,this.vbo[5]=0,this.vbo[6]=t+i,this.vbo[7]=e,this.vbo[8]=0,this.vbo[9]=0,this.vbo[10]=0,this.vbo[11]=0,this.vbo[12]=t,this.vbo[13]=e+r,this.vbo[14]=0,this.vbo[15]=0,this.vbo[16]=0,this.vbo[17]=0,this.vbo[18]=t+i,this.vbo[19]=e+r,this.vbo[20]=0,this.vbo[21]=0,this.vbo[22]=0,this.vbo[23]=0}setColor(t,e,i,r){for(let s=2;s<this.vbo.length;s+=2)this.vbo[s++]=t%256,this.vbo[s++]=e%256,this.vbo[s++]=i%256,this.vbo[s++]=r%256}setTexture(){throw new Error("Method not implemented.")}vertexAttributes(){return{size:2,normalized:!1,stride:24,offset:0}}colorAttributes(){return{size:4,normalized:!1,stride:24,offset:8}}bindBuffer(t){null===this.bufferId&&(this.bufferId=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.bufferId),t.bufferData(t.ARRAY_BUFFER,this.vbo,t.STATIC_DRAW)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(1);e.Scene=class{constructor(){this.shaders=new Map,this.renderables=[],this.programId=null,this.programLinked=!1}addDrawable(...t){this.renderables.push(...t)}preRender(t){this.programLinked||(this.programLinked=!0,t.linkProgram(this.programId));for(const e of this.shaders.values()){const i=e.Attributes;for(const r of i){-1===r.id&&(r.id=t.getAttribLocation(this.programId,r.name));const i=e.getVertexAttribFor(r.name);void 0!==i&&(t.enableVertexAttribArray(r.id),t.vertexAttribPointer(r.id,i.size,t.FLOAT,i.normalized,i.stride,i.offset))}}t.getProgramParameter(this.programId,t.LINK_STATUS)||console.log(`Error LINK_STATUS program Id ${t.getProgramInfoLog(this.programId)}`),t.useProgram(this.programId)}render(t){for(const e of this.renderables)e.bindBuffer(t),this.preRender(t),t.drawArrays(t.TRIANGLE_STRIP,0,4)}addShader(t,e,i){const s=new r.Shader;null===this.programId&&(this.programId=t.createProgram()),s.setShaderData(t,e,i),t.attachShader(this.programId,s.ID),this.shaders.set(e,s)}shader(t){if(!this.shaders.has(t))throw new Error(`Scene does not have shader type ${t} assigned`);return this.shaders.get(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}add(t){return new r(this.x+t.x,this.y+t.y,this.z+t.z)}sub(t){return new r(this.x-t.x,this.y-t.y,this.z-t.z)}div(t){if(0===t.x||0===t.y||0===t.z)throw new TypeError(`Can not divide by zero x:${t.x} y:${t.y} z: ${t.z}`);return new r(this.x/t.x,this.y/t.y,this.z/t.z)}mult(t){return new r(this.x*t.x,this.y*t.y,this.z*t.z)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}scale(t){return new r(this.x*t,this.y*t,this.z*t)}normalize(){const t=this.length();return new r(this.x/t,this.y/t,this.z/t)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}flatten(){return new Float32Array([this.x,this.y,this.z])}}e.Vector3=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(2),s=i(0);class a{constructor(t){void 0!==t&&16===t.length?this.data=t.map(t=>t):(this.data=new Float32Array(16),this.data[0]=1,this.data[5]=1,this.data[10]=1,this.data[15]=1)}setAsIdentity(){this.data.fill(0),this.data[0]=1,this.data[5]=1,this.data[10]=1,this.data[15]=1}scale(t){let e=1,i=1,r=1;const s=new a(this.data);return"object"==typeof t?(e=t.x,i=t.y,r=t.z||1):(e=t,i=t,r=t),s.data[0]*=e,s.data[5]*=i,s.data[10]*=r,s}translate(t){let e=0,i=0,s=0;const n=new a(this.data);return t instanceof r.Vector2?(e=t.x,i=t.y,s=0):(e=t.x,i=t.y,s=t.z||0),n.data[12]+=e,n.data[13]+=i,n.data[14]+=s,n}rotate(t,e){const i=new a(this.data);switch(e){case s.Axis.X:i.data[5]*=Math.cos(t),i.data[6]*=Math.sin(t),i.data[9]*=-Math.sin(t),i.data[10]*=Math.cos(t);break;case s.Axis.Y:i.data[0]*=Math.cos(t),i.data[2]*=-Math.sin(t),i.data[8]*=Math.sin(t),i.data[10]*=Math.cos(t);break;case s.Axis.Z:i.data[0]*=Math.cos(t),i.data[1]*=Math.sin(t),i.data[4]*=-Math.sin(t),i.data[5]*=Math.cos(t)}return i}flatten(){return this.data}}e.Matrix4=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(9);e.WebGLRenderer=r.WebGLRenderer},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.WebGLRenderer=class{constructor(t){this.width=0,this.height=0,this.devicePixelRatio=1,this.canvas=null,this._glCtx=null,void 0!==t&&this.initWithOptions(t)}getContext(){return this._glCtx}aspect(){return this.width/this.height}render(t){this.clear(),t.render(this._glCtx)}resize(t,e){this.canvas.width=this.width=t*this.devicePixelRatio,this.canvas.height=this.height=e*this.devicePixelRatio,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this._glCtx.viewport(0,0,this.width,this.height)}clear(){this._glCtx.clear(this._glCtx.COLOR_BUFFER_BIT|this._glCtx.DEPTH_BUFFER_BIT)}initWithOptions(t){if(this.width=t.width,this.height=t.height,this.devicePixelRatio=window.devicePixelRatio||1,t.domCanvas?this.canvas=t.domCanvas:(this.canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),document.body.appendChild(this.canvas)),t.fullscreen&&(this.width=document.body.clientWidth,this.height=document.body.clientHeight),this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.width=this.width*this.devicePixelRatio,this.canvas.height=this.height*this.devicePixelRatio,t.glContext)this._glCtx=t.glContext;else if(this._glCtx=this.canvas.getContext("webgl2")||this.canvas.getContext("webgl"),null===this._glCtx)throw new Error("glContext is null. Check WebGL compatibility");this._glCtx.viewport(0,0,this.width,this.height),this._glCtx.clearColor(1,0,1,1)}}}])});
//# sourceMappingURL=agent.min.js.map