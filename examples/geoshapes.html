<html>

<head>
  <title>Geometric shapes example</title>
</head>

<body>
  <script src="../lib/agent.js"></script>
  <script>
    const vshr = `
      attribute vec2 aPos;
      attribute vec4 aColor;

      varying vec4 vColor;

      void main() {
        vColor = aColor;
        gl_Position = vec4(aPos, 0.0, 1.0);
      }
    `;
    const fshr = `
      precision mediump float;
      varying vec4 vColor;

      void main() {
        gl_FragColor = vColor;
      }
    `;
    let renderer = new Agent.WebGLRenderer({width: 400, height: 200});
    let square = new Agent.Square(0, 0, 0.25, 0.75);
    let square2 = new Agent.Square(0, 0, -0.25, -0.75);
    let scene = new Agent.Scene();
    let glCtx = renderer.getContext();

    scene.addShader(glCtx, Agent.ShaderType.Vertex, vshr);
    scene.addShader(glCtx, Agent.ShaderType.Fragment, fshr);

    square.setColor(0.0, 0.0, 1.0, 1.0);
    square2.setColor(1.0, 1.0, 0.0, 1.0);

		scene.shader(Agent.ShaderType.Vertex)
			.setAttributeDataFor('aPos', {vertexAttribute: square.vertexAttributes()});

		scene.shader(Agent.ShaderType.Vertex)
			.setAttributeDataFor('aPos', {vertexAttribute: square2.vertexAttributes()});

		scene.shader(Agent.ShaderType.Vertex)
			.setAttributeDataFor('aColor', {vertexAttribute: square.colorAttributes()});

		scene.shader(Agent.ShaderType.Vertex)
			.setAttributeDataFor('aColor', {vertexAttribute: square2.colorAttributes()});

    scene.addDrawable(square, square2);
    renderer.render(scene);
  </script>
</body>

</html>
